<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>Automatic First-Aid Machine</title>
</head>

<body style="font-family:Arial;text-align:center;">

<h2>Automatic First-Aid Machine</h2>

<!-- CAMERA -->
<video id="cam" width="320" height="240" autoplay playsinline></video>
<p id="status" style="color:blue;font-weight:bold;"></p>

<!-- EMERGENCY BUTTON -->
<button onclick="manualStart()" 
        style="font-size:16px;background:red;color:white;padding:10px;border:none;">
ЁЯЪи Emergency / рд╕рдорд╕реНрдпрд╛ рдмреЛрд▓рд╛
</button>

<p id="out" style="font-size:18px;color:green;"></p>

<script>
let step = 0;
let disease = "";
let medicine = "";
let doseInfo = "";
let recognition;

/* SPEAK FUNCTION тАУ Slow Marathi */
function speak(text){
  let msg = new SpeechSynthesisUtterance(text);
  msg.lang = "mr-IN";
  msg.rate = 0.75;
  msg.pitch = 1.0;
  msg.volume = 1.0;
  speechSynthesis.cancel();
  speechSynthesis.speak(msg);
}

/* START MIC */
function startListening(){
  recognition = new webkitSpeechRecognition();
  recognition.lang = "mr-IN";
  recognition.start();

  recognition.onresult = function(e){
    let text = e.results[0][0].transcript;
    out.innerHTML = "ЁЯЧгя╕П рддреБрдореНрд╣реА рдмреЛрд▓рд▓рд╛рдд: " + text;

    /* STEP 1 тАУ Disease Detection */
    if(step === 0){
      if(text.includes("рддрд╛рдк")){
        disease="рддрд╛рдк";
        medicine="рдкреЕрд░рд╛рд╕рд┐рдЯрд╛рдореЙрд▓";
        doseInfo="рем рддреЗ рео рддрд╛рд╕рд╛рдВрдиреА рдШреНрдпрд╛. рджрд┐рд╡рд╕рд╛рддреВрди рдЬрд╛рд╕реНрддреАрдд рдЬрд╛рд╕реНрдд рей рд╡реЗрд│рд╛. рдЬреЗрд╡рдгрд╛рдирдВрддрд░ рд╕рдХрд╛рд│реА рджреБрдкрд╛рд░реА рд╕рдВрдзреНрдпрд╛рдХрд╛рд│ рдШреНрдпрд╛.";
      }
      else if(text.includes("рдбреЛрдХреЗ")){
        disease="рдбреЛрдХреЗрджреБрдЦреА";
        medicine="рдкреЗрдирдХрд┐рд▓рд░";
        doseInfo="рджрд┐рд╡рд╕рд╛рддреВрди реи рд╡реЗрд│рд╛. рдЬреЗрд╡рдгрд╛рдирдВрддрд░ рдШреНрдпрд╛.рд╕рдХрд╛рд│реА рдЖрдгрд┐ рд╕рдВрдзреНрдпрд╛рдХрд╛рд│";
      }
      else if(text.includes("рд╕рд░реНрджреА")){
        disease="рд╕рд░реНрджреА";
        medicine="рдХреЛрд▓реНрдб рдЯреЕрдмреНрд▓реЗрдЯ";
        doseInfo="рджрд┐рд╡рд╕рд╛рддреВрди реи рд╡реЗрд│рд╛. рдЧрд░рдо рдкрд╛рдгреНрдпрд╛рд╕реЛрдмрдд рдШреНрдпрд╛.рд╕рдХрд╛рд│реА рдЖрдгрд┐ рд╕рдВрдзреНрдпрд╛рдХрд╛рд│";
      }
      else if(text.includes("рдЦреЛрдХрд▓рд╛")){
        disease="рдЦреЛрдХрд▓рд╛";
        medicine="рдЦреЛрдХрд▓реНрдпрд╛рдЪреА рдЧреЛрд│реА";
        doseInfo="рджрд┐рд╡рд╕рд╛рддреВрди реи рддреЗ рей рд╡реЗрд│рд╛. рдкрд╛рдгреНрдпрд╛рд╕реЛрдмрдд рдШреНрдпрд╛.рд╕рдХрд╛рд│реА рдЖрдгрд┐ рд╕рдВрдзреНрдпрд╛рдХрд╛рд│";
      }
      else if(text.includes("рдкреЛрдЯ")){
        disease="рдкреЛрдЯрджреБрдЦреА";
        medicine="рдЕрдБрдЯреЕрд╕рд┐рдб";
        doseInfo="рдЬреЗрд╡рдгрд╛рдирдВрддрд░ рдШреНрдпрд╛. рджрд┐рд╡рд╕рд╛рддреВрди реи рд╡реЗрд│рд╛. рд╕рдХрд╛рд│реА рдЖрдгрд┐ рд╕рдВрдзреНрдпрд╛рдХрд╛рд│реА";
      }
      else if(text.includes("рдЬрдЦрдо")){
        disease="рдЬрдЦрдо";
        medicine="рдХреЙрдЯрди рдЖрдгрд┐ рдЕрдБрдЯрд┐рд╕реЗрдкреНрдЯрд┐рдХ";
        doseInfo="рдЖрдзреА рдЕрдБрдЯрд┐рд╕реЗрдкреНрдЯрд┐рдХ рд▓рд╛рд╡рд╛, рдордЧ рдХреЙрдЯрди рд╡рд╛рдкрд░рд╛.";
      }
      else if(text.includes("рдЪрдХреНрдХрд░")){
        disease="рдЪрдХреНрдХрд░";
        medicine="ORS";
        doseInfo="ORS рез рд▓рд┐рдЯрд░ рдкрд╛рдгреА рдорд┐рд╕рд│реВрди рд╣рд│реВрд╣рд│реВ рдкреНрдпрд╛. рджрд┐рд╡рд╕рд╛рддреВрди реи рддреЗ рей рд╡реЗрд│рд╛.";
      }
      else{
        speak("рдбреЙрдХреНрдЯрд░рд╛рдВрдЪрд╛ рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛");
        return;
      }

      step = 1;
      speak("рддреБрд▓рд╛ " + disease + " рдЖрд╣реЗ рдХрд╛?");
      setTimeout(startListening, 4000);
    }

    /* STEP 2 тАУ Confirmation */
    else if(step === 1){
      if(text.includes("рд╣реЛ")){
        speak("рдордЧ " + medicine + " рдШреНрдпрд╛. " + doseInfo);
        out.innerHTML +=
          "<br><b>ЁЯй║ рдЖрдЬрд╛рд░:</b> " + disease +
          "<br><b>ЁЯТК рдФрд╖рдз:</b> " + medicine +
          "<br><b>ЁЯУЛ рдбреЛрд╕:</b> " + doseInfo;
        step = 0;
      }
      else{
        speak("рдбреЙрдХреНрдЯрд░рд╛рдВрдЪрд╛ рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛");
        step = 0;
      }
    }
  };
}

/* AUTO START WHEN CAMERA ON */
navigator.mediaDevices.getUserMedia({ video:true })
.then(stream=>{
  cam.srcObject = stream;
  status.innerText = "ЁЯСд рд╡реНрдпрдХреНрддреА рдУрд│рдЦрд▓реА рдЧреЗрд▓реА рдЖрд╣реЗ (Auto Mode)";
  speak("рддреБрд▓рд╛ рдХрд╛рдп рддреНрд░рд╛рд╕ рд╣реЛрддреЛрдп?");
  setTimeout(startListening, 4000);
});

/* EMERGENCY MANUAL BUTTON */
function manualStart(){
  status.innerText = "ЁЯЪи Emergency Mode рд╕реБрд░реВ";
  speak("рдХреГрдкрдпрд╛ рддреБрдордЪреА рд╕рдорд╕реНрдпрд╛ рд╕рд╛рдВрдЧрд╛");
  step = 0;
  setTimeout(startListening, 3000);
}
</script>

</body>
</html>
