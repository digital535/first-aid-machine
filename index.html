<!DOCTYPE html>
<html lang="mr">
<head>
<meta charset="UTF-8">
<title>Automatic First-Aid Machine</title>
</head>

<body style="font-family:Arial;text-align:center;">

<h2>Automatic First-Aid Machine</h2>

<!-- CAMERA -->
<video id="cam" width="320" height="240" autoplay playsinline></video>
<p id="status" style="color:blue;font-weight:bold;"></p>

<button onclick="startConversation()" style="font-size:16px;">
  ЁЯОд рдмреЛрд▓рд╛рдпрд▓рд╛ рд╕реБрд░реБрд╡рд╛рдд рдХрд░рд╛
</button>

<p id="out" style="font-size:18px;color:green;"></p>

<script>
let step = 0;
let detectedDisease = "";

/* SPEAK FUNCTION (Marathi Voice) */
function speak(text){
  let msg = new SpeechSynthesisUtterance(text);
  msg.lang = "mr-IN";
  window.speechSynthesis.speak(msg);
}

/* CAMERA ON */
navigator.mediaDevices.getUserMedia({ video:true })
.then(stream=>{
  cam.srcObject = stream;
  status.innerText = "ЁЯСд рд╡реНрдпрдХреНрддреА рдУрд│рдЦрд▓реА рдЧреЗрд▓реА рдЖрд╣реЗ";
  speak("рддреБрд▓рд╛ рдХрд╛рдп рддреНрд░рд╛рд╕ рд╣реЛрддреЛрдп?");
});

/* START VOICE CONVERSATION */
function startConversation(){
  let r = new webkitSpeechRecognition();
  r.lang = "mr-IN";
  r.start();

  r.onresult = function(e){
    let text = e.results[0][0].transcript;
    out.innerHTML = "рддреВ рдмреЛрд▓рд▓рд╛рд╕: " + text;

    /* STEP 1 тАУ Disease Detection */
    if(step === 0){
      if(text.includes("рддрд╛рдк")){
        detectedDisease = "рддрд╛рдк";
        step = 1;
        speak("рддреБрд▓рд╛ рддрд╛рдк рдпреЗрддреЛрдп рдХрд╛?");
      }
      else{
        speak("рдбреЙрдХреНрдЯрд░рд╛рдВрдЪрд╛ рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛");
      }
    }

    /* STEP 2 тАУ Confirmation */
    else if(step === 1){
      if(text.includes("рд╣реЛ")){
        step = 2;
        speak("рдордЧ рдкреЕрд░рд╛рд╕рд┐рдЯрд╛рдореЙрд▓рдЪреА рдЧреЛрд│реА рдШреНрдпрд╛");
        out.innerHTML += "<br>ЁЯТК рдФрд╖рдз: рдкреЕрд░рд╛рд╕рд┐рдЯрд╛рдореЙрд▓";
      }
      else{
        speak("рдбреЙрдХреНрдЯрд░рд╛рдВрдЪрд╛ рд╕рд▓реНрд▓рд╛ рдШреНрдпрд╛");
      }
    }
  };
}
</script>

</body>
</html>
s
